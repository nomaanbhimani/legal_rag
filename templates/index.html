<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LegalMind India ğŸ›ï¸ - AI Legal Assistant</title>
    
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CSS VARIABLES & BASE STYLES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            --primary: #1e3a5f;
            --secondary: #2d5a87;
            --accent: #3b82f6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: #f8fafc;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GRADIENT & CARD STYLES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .gradient-bg {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: box-shadow 0.3s ease, transform 0.2s ease;
        }
        
        .card:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LOADING SPINNERS & ANIMATIONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        /* Basic Spinner */
        .spinner {
            border: 3px solid #e5e7eb;
            border-top: 3px solid var(--accent);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 0.8s linear infinite;
            display: inline-block;
        }
        
        .spinner-lg {
            width: 40px;
            height: 40px;
            border-width: 4px;
        }
        
        .spinner-xl {
            width: 60px;
            height: 60px;
            border-width: 5px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Pulse Spinner */
        .pulse-spinner {
            width: 40px;
            height: 40px;
            background-color: var(--accent);
            border-radius: 50%;
            animation: pulse-scale 1.2s ease-in-out infinite;
        }
        
        @keyframes pulse-scale {
            0%, 100% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1); opacity: 1; }
        }
        
        /* Dots Loading */
        .dots-loading {
            display: flex;
            gap: 6px;
            align-items: center;
            justify-content: center;
        }
        
        .dots-loading span {
            width: 10px;
            height: 10px;
            background-color: var(--accent);
            border-radius: 50%;
            animation: dots-bounce 1.4s ease-in-out infinite both;
        }
        
        .dots-loading span:nth-child(1) { animation-delay: -0.32s; }
        .dots-loading span:nth-child(2) { animation-delay: -0.16s; }
        .dots-loading span:nth-child(3) { animation-delay: 0; }
        
        @keyframes dots-bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        /* Bar Loading */
        .bar-loading {
            display: flex;
            gap: 4px;
            align-items: flex-end;
            justify-content: center;
            height: 30px;
        }
        
        .bar-loading span {
            width: 6px;
            background: linear-gradient(to top, var(--accent), var(--secondary));
            border-radius: 3px;
            animation: bar-stretch 1.2s ease-in-out infinite;
        }
        
        .bar-loading span:nth-child(1) { animation-delay: 0s; height: 15px; }
        .bar-loading span:nth-child(2) { animation-delay: 0.1s; height: 20px; }
        .bar-loading span:nth-child(3) { animation-delay: 0.2s; height: 25px; }
        .bar-loading span:nth-child(4) { animation-delay: 0.3s; height: 20px; }
        .bar-loading span:nth-child(5) { animation-delay: 0.4s; height: 15px; }
        
        @keyframes bar-stretch {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }
        
        /* Circle Progress */
        .circle-progress {
            width: 60px;
            height: 60px;
            position: relative;
        }
        
        .circle-progress svg {
            transform: rotate(-90deg);
        }
        
        .circle-progress circle {
            fill: none;
            stroke-width: 5;
            stroke-linecap: round;
        }
        
        .circle-progress .bg {
            stroke: #e5e7eb;
        }
        
        .circle-progress .progress {
            stroke: var(--accent);
            stroke-dasharray: 157;
            stroke-dashoffset: 157;
            animation: circle-fill 2s ease-in-out infinite;
        }
        
        @keyframes circle-fill {
            0% { stroke-dashoffset: 157; }
            50% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: -157; }
        }
        
        /* Document Processing Animation */
        .doc-processing {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
            padding: 40px;
        }
        
        .doc-icon-animated {
            position: relative;
            width: 80px;
            height: 100px;
        }
        
        .doc-icon-animated .page {
            position: absolute;
            width: 60px;
            height: 80px;
            background: white;
            border: 2px solid var(--accent);
            border-radius: 4px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .doc-icon-animated .page:nth-child(1) {
            top: 0;
            animation: page-shuffle 1.5s ease-in-out infinite;
        }
        
        .doc-icon-animated .page:nth-child(2) {
            top: 5px;
            animation: page-shuffle 1.5s ease-in-out 0.2s infinite;
            opacity: 0.7;
        }
        
        .doc-icon-animated .page:nth-child(3) {
            top: 10px;
            animation: page-shuffle 1.5s ease-in-out 0.4s infinite;
            opacity: 0.4;
        }
        
        .doc-icon-animated .scan-line {
            position: absolute;
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            left: 50%;
            transform: translateX(-50%);
            animation: scan-move 1.5s ease-in-out infinite;
        }
        
        @keyframes page-shuffle {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }
        
        @keyframes scan-move {
            0% { top: 10px; opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { top: 80px; opacity: 0; }
        }
        
        /* Upload Progress Bar */
        .upload-progress-container {
            width: 100%;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            height: 8px;
        }
        
        .upload-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--success));
            border-radius: 10px;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .upload-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.4),
                transparent
            );
            animation: progress-shine 1.5s infinite;
        }
        
        @keyframes progress-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Skeleton Loading */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 4px;
        }
        
        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Processing Steps */
        .processing-steps {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 300px;
        }
        
        .step {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 16px;
            background: #f8fafc;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .step.active {
            background: #eff6ff;
            border-left: 3px solid var(--accent);
        }
        
        .step.completed {
            background: #f0fdf4;
            border-left: 3px solid var(--success);
        }
        
        .step-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        .step.pending .step-icon {
            background: #e5e7eb;
            color: #9ca3af;
        }
        
        .step.active .step-icon {
            background: var(--accent);
            color: white;
            animation: pulse-scale 1s infinite;
        }
        
        .step.completed .step-icon {
            background: var(--success);
            color: white;
        }
        
        .step-text {
            font-size: 14px;
            color: #6b7280;
        }
        
        .step.active .step-text {
            color: var(--accent);
            font-weight: 500;
        }
        
        .step.completed .step-text {
            color: var(--success);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FILE UPLOAD OVERLAY
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .upload-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .upload-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .upload-modal {
            background: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 450px;
            width: 90%;
            text-align: center;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        .upload-overlay.active .upload-modal {
            transform: scale(1);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FILE CARD LOADING STATE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .file-card {
            background: #f8fafc;
            border-radius: 10px;
            padding: 16px;
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
        }
        
        .file-card.uploading {
            border-color: var(--accent);
            background: #eff6ff;
        }
        
        .file-card.success {
            border-color: var(--success);
            background: #f0fdf4;
        }
        
        .file-card.error {
            border-color: var(--danger);
            background: #fef2f2;
        }
        
        .file-card-progress {
            margin-top: 12px;
        }
        
        .file-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            margin-top: 8px;
        }
        
        .file-status.uploading { color: var(--accent); }
        .file-status.success { color: var(--success); }
        .file-status.error { color: var(--danger); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STANDARD COMPONENT STYLES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .concept-tag {
            background: #e0f2fe;
            color: #0369a1;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            cursor: help;
            display: inline-block;
            margin: 2px;
            transition: all 0.2s ease;
        }
        
        .concept-tag:hover {
            background: #bae6fd;
            transform: translateY(-1px);
        }
        
        .citation-tag {
            background: #fef3c7;
            color: #92400e;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            display: inline-block;
            margin: 2px;
        }
        
        .doc-type-tag {
            background: #f0fdf4;
            color: #166534;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .source-card {
            background: #f8fafc;
            border-left: 4px solid var(--secondary);
            transition: all 0.2s ease;
        }
        
        .source-card:hover {
            background: #f1f5f9;
            transform: translateX(4px);
        }
        
        .doc-card {
            background: #f1f5f9;
            border-radius: 8px;
            padding: 12px;
            transition: all 0.2s ease;
        }
        
        .doc-card:hover {
            background: #e2e8f0;
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.4s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Drop Zone */
        .drop-zone {
            border: 2px dashed #cbd5e1;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .drop-zone:hover {
            border-color: var(--accent);
            background: #f8fafc;
        }
        
        .drop-zone.drag-over {
            border-color: var(--accent);
            background: #eff6ff;
            transform: scale(1.02);
        }
        
        /* Form Elements */
        textarea:focus, input:focus, select:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
            border-color: var(--accent);
        }
        
        /* Buttons */
        .btn {
            transition: all 0.2s ease;
            font-weight: 500;
            cursor: pointer;
        }
        
        .btn:hover:not(:disabled) {
            transform: translateY(-1px);
        }
        
        .btn:active:not(:disabled) {
            transform: translateY(0);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: #2563eb;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover:not(:disabled) {
            background: #059669;
        }
        
        /* Tabs */
        .tab {
            padding: 10px 20px;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            color: #6b7280;
        }
        
        .tab:hover {
            color: var(--accent);
        }
        
        .tab.active {
            border-bottom-color: var(--accent);
            color: var(--accent);
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
        }
        
        .tooltip::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #1f2937;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            z-index: 100;
        }
        
        .tooltip:hover::after {
            opacity: 1;
            visibility: visible;
            bottom: calc(100% + 5px);
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* Checkmark Animation */
        .checkmark {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: block;
            stroke-width: 3;
            stroke: var(--success);
            stroke-miterlimit: 10;
            box-shadow: inset 0px 0px 0px var(--success);
            animation: checkmark-fill 0.4s ease-in-out 0.4s forwards, checkmark-scale 0.3s ease-in-out 0.9s both;
        }
        
        .checkmark-circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 3;
            stroke-miterlimit: 10;
            stroke: var(--success);
            fill: none;
            animation: checkmark-stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }
        
        .checkmark-check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: checkmark-stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }
        
        @keyframes checkmark-stroke {
            100% { stroke-dashoffset: 0; }
        }
        
        @keyframes checkmark-scale {
            0%, 100% { transform: none; }
            50% { transform: scale3d(1.1, 1.1, 1); }
        }
        
        @keyframes checkmark-fill {
            100% { box-shadow: inset 0px 0px 0px 30px #f0fdf4; }
        }
    </style>
</head>

<body class="min-h-screen">
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         UPLOAD OVERLAY MODAL
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="upload-overlay" class="upload-overlay">
        <div class="upload-modal">
            <!-- Processing Animation -->
            <div id="processing-animation" class="doc-processing">
                <div class="doc-icon-animated">
                    <div class="page"></div>
                    <div class="page"></div>
                    <div class="page"></div>
                    <div class="scan-line"></div>
                </div>
                
                <h3 id="processing-title" class="text-xl font-semibold text-gray-800 mt-4">
                    Processing Documents...
                </h3>
                
                <p id="processing-subtitle" class="text-gray-500 text-sm">
                    Extracting text and creating embeddings
                </p>
                
                <!-- Progress Bar -->
                <div class="w-full mt-4">
                    <div class="upload-progress-container">
                        <div id="upload-progress-bar" class="upload-progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="flex justify-between mt-2 text-xs text-gray-500">
                        <span id="progress-text">0%</span>
                        <span id="progress-file">File 0 of 0</span>
                    </div>
                </div>
                
                <!-- Processing Steps -->
                <div class="processing-steps mt-6">
                    <div id="step-extract" class="step pending">
                        <div class="step-icon">1</div>
                        <span class="step-text">Extracting text from document</span>
                    </div>
                    <div id="step-chunk" class="step pending">
                        <div class="step-icon">2</div>
                        <span class="step-text">Chunking into sections</span>
                    </div>
                    <div id="step-embed" class="step pending">
                        <div class="step-icon">3</div>
                        <span class="step-text">Creating embeddings</span>
                    </div>
                    <div id="step-index" class="step pending">
                        <div class="step-icon">4</div>
                        <span class="step-text">Indexing for search</span>
                    </div>
                </div>
            </div>
            
            <!-- Success State -->
            <div id="success-animation" class="hidden text-center py-8">
                <svg class="checkmark mx-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                    <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="checkmark-check" fill="none" d="m14.1 27.2 7.1 7.2 16.7-16.8"/>
                </svg>
                <h3 class="text-xl font-semibold text-gray-800 mt-6">Upload Complete!</h3>
                <p id="success-message" class="text-gray-500 text-sm mt-2">
                    Documents processed successfully
                </p>
                <button onclick="closeUploadOverlay()" class="btn btn-primary px-6 py-2 rounded-lg mt-6">
                    Continue
                </button>
            </div>
            
            <!-- Error State -->
            <div id="error-animation" class="hidden text-center py-8">
                <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto">
                    <span class="text-3xl">âŒ</span>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mt-6">Upload Failed</h3>
                <p id="error-message" class="text-red-600 text-sm mt-2">
                    An error occurred during processing
                </p>
                <button onclick="closeUploadOverlay()" class="btn bg-gray-200 hover:bg-gray-300 px-6 py-2 rounded-lg mt-6">
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         HEADER
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <header class="gradient-bg text-white py-6 px-4 shadow-lg">
        <div class="max-w-6xl mx-auto">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold flex items-center gap-3">
                        <span class="text-3xl">ğŸ›ï¸</span>
                        <span>LegalMind India</span>
                    </h1>
                    <p class="text-blue-100 mt-1 text-sm md:text-base">
                        AI-Powered Indian Legal Document Assistant
                    </p>
                </div>
                <div class="text-right">
                    <div class="flex items-center gap-2 text-sm">
                        <span id="status-dot" class="w-2 h-2 bg-green-400 rounded-full pulse"></span>
                        <span id="status-text">Ready</span>
                    </div>
                    <div class="text-blue-200 text-xs mt-1" id="stats-display">
                        0 documents â€¢ 0 chunks
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MAIN CONTENT
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <main class="max-w-6xl mx-auto px-4 py-8 space-y-6">
        
        <!-- Upload Section -->
        <section class="card p-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <span>ğŸ“¤</span>
                <span>Upload Legal Documents</span>
            </h2>
            
            <!-- Tabs -->
            <div class="flex border-b border-gray-200 mb-4">
                <button id="tab-file" onclick="switchTab('file')" class="tab active">
                    ğŸ“ File Upload
                </button>
                <button id="tab-text" onclick="switchTab('text')" class="tab">
                    ğŸ“ Paste Text
                </button>
            </div>
            
            <!-- File Upload Panel -->
            <div id="panel-file" class="fade-in">
                <div id="drop-zone" class="drop-zone rounded-lg p-8 text-center">
                    <div class="text-5xl mb-4">ğŸ“„</div>
                    <p class="text-gray-600 mb-2 font-medium text-lg">
                        Drag & drop files here or click to browse
                    </p>
                    <p class="text-gray-400 text-sm">
                        Supports: PDF, DOCX, DOC, TXT, RTF (Max 10MB per file)
                    </p>
                    <input type="file" id="file-input" class="hidden" 
                           accept=".pdf,.docx,.doc,.txt,.rtf" multiple>
                </div>
                
                <!-- Selected Files List -->
                <div id="file-list" class="mt-4 space-y-3"></div>
                
                <!-- Upload Button -->
                <button id="upload-files-btn" onclick="uploadFiles()" 
                        class="btn btn-primary mt-4 px-6 py-3 rounded-lg hidden items-center gap-2">
                    <span>ğŸ“¤ Upload Selected Files</span>
                    <span id="upload-files-loader" class="spinner hidden"></span>
                </button>
            </div>
            
            <!-- Text Upload Panel -->
            <div id="panel-text" class="hidden fade-in">
                <textarea id="doc-input" 
                          class="w-full p-4 border border-gray-200 rounded-lg h-40 text-sm resize-none"
                          placeholder="Paste your legal document text here (judgment, contract, statute, petition, etc.)..."></textarea>
                <div class="flex flex-col sm:flex-row gap-4 mt-4">
                    <input type="text" id="doc-name" 
                           class="flex-1 p-3 border border-gray-200 rounded-lg"
                           placeholder="Document name (e.g., contract.txt)">
                    <button id="upload-text-btn" onclick="uploadText()" 
                            class="btn btn-primary px-6 py-3 rounded-lg flex items-center justify-center gap-2">
                        <span>ğŸ“¤ Upload Text</span>
                        <span id="upload-text-loader" class="spinner hidden"></span>
                    </button>
                </div>
            </div>
            
            <!-- Upload Result (inline) -->
            <div id="upload-result" class="mt-4 hidden"></div>
            
            <!-- Uploaded Documents List -->
            <div id="documents-section" class="mt-6 hidden">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="font-medium text-gray-700 flex items-center gap-2">
                        <span>ğŸ“š</span>
                        <span>Uploaded Documents</span>
                        <span id="doc-count-badge" class="bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full">0</span>
                    </h3>
                    <button onclick="clearAllDocuments()" 
                            class="text-red-600 hover:text-red-700 text-sm font-medium flex items-center gap-1">
                        <span>ğŸ—‘ï¸</span>
                        <span>Clear All</span>
                    </button>
                </div>
                <div id="documents-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
            </div>
        </section>

        <!-- Question Section -->
        <section class="card p-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <span>â“</span>
                <span>Ask a Legal Question</span>
            </h2>
            
            <div class="flex flex-col md:flex-row gap-4">
                <input type="text" id="question-input"
                       class="flex-1 p-4 border border-gray-200 rounded-lg text-lg"
                       placeholder="e.g., What is the punishment for murder under IPC?"
                       onkeypress="if(event.key === 'Enter') askQuestion()">
                <button id="ask-btn" onclick="askQuestion()"
                        class="btn btn-success px-8 py-4 rounded-lg flex items-center justify-center gap-2 text-lg">
                    <span>ğŸ” Ask</span>
                    <span id="ask-loader" class="spinner hidden"></span>
                </button>
            </div>
            
            <!-- Quick Questions -->
            <div class="mt-4 flex flex-wrap gap-2 items-center">
                <span class="text-sm text-gray-500">Quick:</span>
                <button onclick="setQuestion('What is anticipatory bail?')" class="text-sm text-blue-600 hover:underline">Anticipatory bail</button>
                <span class="text-gray-300">â€¢</span>
                <button onclick="setQuestion('What is Section 302 of IPC?')" class="text-sm text-blue-600 hover:underline">Section 302</button>
                <span class="text-gray-300">â€¢</span>
                <button onclick="setQuestion('What are fundamental rights?')" class="text-sm text-blue-600 hover:underline">Fundamental rights</button>
                <span class="text-gray-300">â€¢</span>
                <button onclick="setQuestion('What is habeas corpus?')" class="text-sm text-blue-600 hover:underline">Habeas corpus</button>
            </div>
        </section>

        <!-- Answer Section -->
        <section id="answer-section" class="card p-6 hidden fade-in">
            <!-- Header -->
            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4">
                <h2 class="text-lg font-semibold text-gray-800 flex items-center gap-2">
                    <span>ğŸ“‹</span>
                    <span>Answer</span>
                </h2>
                <div class="flex items-center gap-4 text-sm">
                    <span id="confidence-display" class="px-3 py-1 rounded-full font-medium"></span>
                    <span id="time-display" class="text-gray-400"></span>
                </div>
            </div>
            
            <!-- Loading State for Answer -->
            <div id="answer-loading" class="hidden py-8 text-center">
                <div class="bar-loading mx-auto mb-4">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <p class="text-gray-500">Analyzing documents and generating answer...</p>
            </div>
            
            <!-- Answer Content -->
            <div id="answer-content">
                <div id="answer-text" class="text-gray-700 text-lg leading-relaxed mb-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500"></div>
                
                <div id="simplified-section" class="hidden mb-4 slide-in">
                    <h3 class="font-medium text-gray-700 mb-2 flex items-center gap-2">
                        <span>âœ¨</span>
                        <span>Simplified Explanation:</span>
                    </h3>
                    <div id="simplified-text" class="text-gray-600 p-4 bg-green-50 rounded-lg border-l-4 border-green-500"></div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div id="concepts-section" class="hidden">
                        <h3 class="font-medium text-gray-700 mb-2 flex items-center gap-2">
                            <span>ğŸ“š</span>
                            <span>Legal Concepts:</span>
                        </h3>
                        <div id="concepts-list" class="flex flex-wrap gap-1"></div>
                    </div>
                    <div id="citations-section" class="hidden">
                        <h3 class="font-medium text-gray-700 mb-2 flex items-center gap-2">
                            <span>ğŸ“–</span>
                            <span>Citations:</span>
                        </h3>
                        <div id="citations-list" class="flex flex-wrap gap-1"></div>
                    </div>
                </div>
                
                <div id="sources-section" class="hidden">
                    <h3 class="font-medium text-gray-700 mb-3 flex items-center gap-2">
                        <span>ğŸ“„</span>
                        <span>Sources:</span>
                    </h3>
                    <div id="sources-list" class="space-y-3"></div>
                </div>
            </div>
        </section>

        <!-- Sample Documents -->
        <section class="card p-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <span>ğŸ“š</span>
                <span>Sample Documents</span>
            </h2>
            <p class="text-gray-500 text-sm mb-4">Load sample Indian legal documents for testing:</p>
            <div class="flex flex-wrap gap-3">
                <button onclick="loadSample('ipc302')" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition flex items-center gap-2">
                    <span>âš–ï¸</span> IPC Section 302
                </button>
                <button onclick="loadSample('bail')" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition flex items-center gap-2">
                    <span>ğŸ”“</span> Bail Provisions
                </button>
                <button onclick="loadSample('fundamental')" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition flex items-center gap-2">
                    <span>ğŸ“œ</span> Fundamental Rights
                </button>
                <button onclick="loadSample('contract')" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition flex items-center gap-2">
                    <span>ğŸ“</span> Contract Agreement
                </button>
            </div>
        </section>

        <!-- Info Section -->
        <section class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">â„¹ï¸ How LegalMind Works</h3>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="flex items-start gap-3">
                    <span class="text-3xl">1ï¸âƒ£</span>
                    <div>
                        <strong class="text-gray-800 block">Upload Documents</strong>
                        <p class="text-gray-600 text-sm mt-1">Upload legal documents (PDF, DOCX, TXT) or paste text.</p>
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <span class="text-3xl">2ï¸âƒ£</span>
                    <div>
                        <strong class="text-gray-800 block">Ask Questions</strong>
                        <p class="text-gray-600 text-sm mt-1">Ask questions in plain English about your documents.</p>
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <span class="text-3xl">3ï¸âƒ£</span>
                    <div>
                        <strong class="text-gray-800 block">Get Answers</strong>
                        <p class="text-gray-600 text-sm mt-1">Receive simplified answers with legal terms explained.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 text-gray-500 text-sm border-t border-gray-200 mt-8">
        <p>Built with ğŸ¤– InLegalBERT + RAG Architecture</p>
        <p class="text-xs mt-1">Supports PDF, DOCX, TXT â€¢ Optimized for Indian Legal Documents</p>
    </footer>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         JAVASCRIPT
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SAMPLE DOCUMENTS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        const samples = {
            ipc302: {
                name: 'IPC_Section_302.txt',
                text: `INDIAN PENAL CODE - SECTION 302

Section 302 - Punishment for murder.

Whoever commits murder shall be punished with death, or imprisonment for life, and shall also be liable to fine.

Murder is defined under Section 300 of the Indian Penal Code. The essential ingredients include:
1. The act must be done with the intention of causing death
2. The act must be done with the intention of causing such bodily injury as the offender knows to be likely to cause death
3. The act must be done with the intention of causing bodily injury sufficient in the ordinary course of nature to cause death

Related Sections:
- Section 299: Culpable Homicide
- Section 300: When culpable homicide is murder
- Section 304: Punishment for culpable homicide not amounting to murder

In State of AP v. Rayavarapu Punnayya (AIR 1977 SC 45), the Supreme Court held that the distinction between murder and culpable homicide depends upon the degree of probability of death.`
            },
            bail: {
                name: 'Bail_Provisions.txt',
                text: `BAIL PROVISIONS UNDER INDIAN LAW

Chapter XXXIII of the Code of Criminal Procedure, 1973

1. TYPES OF BAIL:

Regular Bail (Section 437, 439 CrPC):
Bail granted to a person in judicial custody. Court considers nature of accusation, severity of punishment, character of accused.

Anticipatory Bail (Section 438 CrPC):
Direction to release on bail before arrest. High Court or Sessions Court may grant when person apprehends arrest for non-bailable offence.

The Supreme Court in Sushila Aggarwal v. State (2020) 5 SCC 1 held anticipatory bail can be granted without time limit.

2. BAILABLE vs NON-BAILABLE:

Bailable Offence (Section 436): Accused has RIGHT to bail
Non-Bailable Offence (Section 437): Bail is at court's DISCRETION`
            },
            fundamental: {
                name: 'Fundamental_Rights.txt',
                text: `FUNDAMENTAL RIGHTS - CONSTITUTION OF INDIA
PART III (Articles 12-35)

Article 14 - Equality before law
The State shall not deny equality before law or equal protection of laws.

Article 19 - Freedom of speech
All citizens have the right to freedom of speech and expression, assemble peaceably, form associations, move freely, reside anywhere, practice any profession.

Article 21 - Right to life and liberty
No person shall be deprived of life or personal liberty except according to procedure established by law.

In Maneka Gandhi v. Union of India (AIR 1978 SC 597), Supreme Court expanded Article 21 to include right to live with dignity.

Article 32 - Right to Constitutional Remedies
Right to move Supreme Court for enforcement of Fundamental Rights. Dr. Ambedkar called it the "heart and soul" of the Constitution.`
            },
            contract: {
                name: 'Contract_Agreement.txt',
                text: `PROFESSIONAL SERVICES AGREEMENT

This Agreement is made between Party A ("Client") and Party B ("Service Provider").

WHEREAS the Client desires to engage services of the Provider;
NOW THEREFORE, the parties agree:

1. SCOPE: Provider shall perform services with due diligence and care.
2. CONSIDERATION: Client shall pay as per Schedule B within 30 days of invoice.
3. INDEMNIFICATION: Each party shall indemnify the other from claims arising from breach.
4. LIMITATION: Neither party liable for indirect or consequential damages.
5. CONFIDENTIALITY: Parties shall maintain confidentiality. Survives for 3 years.
6. TERMINATION: Either party may terminate with 30 days written notice.
7. GOVERNING LAW: Governed by laws of India. Courts in [City] have exclusive jurisdiction.
8. DISPUTE RESOLUTION: Disputes through mediation, then arbitration under Arbitration Act, 1996.`
            }
        };

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // STATE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let selectedFiles = [];
        let uploadedDocuments = [];
        let currentUploadIndex = 0;
        let totalFilesToUpload = 0;

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // INITIALIZATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        document.addEventListener('DOMContentLoaded', function() {
            initializeDropZone();
            updateStats();
            loadDocuments();
        });

        function initializeDropZone() {
            const dropZone = document.getElementById('drop-zone');
            const fileInput = document.getElementById('file-input');

            dropZone.addEventListener('click', () => fileInput.click());

            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('drag-over');
            });

            dropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                dropZone.classList.remove('drag-over');
            });

            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('drag-over');
                handleFiles(e.dataTransfer.files);
            });

            fileInput.addEventListener('change', (e) => handleFiles(e.target.files));
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // TAB SWITCHING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function switchTab(tab) {
            document.getElementById('tab-file').classList.toggle('active', tab === 'file');
            document.getElementById('tab-text').classList.toggle('active', tab === 'text');
            document.getElementById('panel-file').classList.toggle('hidden', tab !== 'file');
            document.getElementById('panel-text').classList.toggle('hidden', tab !== 'text');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // FILE HANDLING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function handleFiles(files) {
            selectedFiles = Array.from(files);
            renderFileList();
        }

        function getFileIcon(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            const icons = { 'pdf': 'ğŸ“•', 'docx': 'ğŸ“˜', 'doc': 'ğŸ“˜', 'txt': 'ğŸ“„', 'rtf': 'ğŸ“„' };
            return icons[ext] || 'ğŸ“„';
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function renderFileList() {
            const listEl = document.getElementById('file-list');
            const uploadBtn = document.getElementById('upload-files-btn');

            if (selectedFiles.length === 0) {
                listEl.innerHTML = '';
                uploadBtn.classList.add('hidden');
                return;
            }

            listEl.innerHTML = selectedFiles.map((file, index) => `
                <div id="file-card-${index}" class="file-card flex justify-between items-center fade-in">
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">${getFileIcon(file.name)}</span>
                        <div>
                            <div class="font-medium text-gray-800">${file.name}</div>
                            <div class="text-gray-400 text-xs">${formatFileSize(file.size)}</div>
                        </div>
                    </div>
                    <button onclick="removeFile(${index})" class="text-red-500 hover:text-red-700 p-2 text-lg">
                        âœ•
                    </button>
                </div>
            `).join('');

            uploadBtn.classList.remove('hidden');
            uploadBtn.classList.add('flex');
        }

        function removeFile(index) {
            selectedFiles.splice(index, 1);
            renderFileList();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // UPLOAD OVERLAY FUNCTIONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function showUploadOverlay() {
            const overlay = document.getElementById('upload-overlay');
            overlay.classList.add('active');
            
            // Reset states
            document.getElementById('processing-animation').classList.remove('hidden');
            document.getElementById('success-animation').classList.add('hidden');
            document.getElementById('error-animation').classList.add('hidden');
            
            // Reset steps
            resetProcessingSteps();
        }

        function closeUploadOverlay() {
            const overlay = document.getElementById('upload-overlay');
            overlay.classList.remove('active');
        }

        function resetProcessingSteps() {
            const steps = ['step-extract', 'step-chunk', 'step-embed', 'step-index'];
            steps.forEach(stepId => {
                const step = document.getElementById(stepId);
                step.className = 'step pending';
                step.querySelector('.step-icon').textContent = steps.indexOf(stepId) + 1;
            });
        }

        function updateProcessingStep(stepId, status) {
            const step = document.getElementById(stepId);
            step.className = `step ${status}`;
            
            if (status === 'completed') {
                step.querySelector('.step-icon').textContent = 'âœ“';
            } else if (status === 'active') {
                step.querySelector('.step-icon').innerHTML = '<span class="spinner" style="width:14px;height:14px;border-width:2px;"></span>';
            }
        }

        function updateProgress(percent, fileNum, totalFiles) {
            document.getElementById('upload-progress-bar').style.width = `${percent}%`;
            document.getElementById('progress-text').textContent = `${Math.round(percent)}%`;
            document.getElementById('progress-file').textContent = `File ${fileNum} of ${totalFiles}`;
        }

        function showUploadSuccess(message) {
            document.getElementById('processing-animation').classList.add('hidden');
            document.getElementById('success-animation').classList.remove('hidden');
            document.getElementById('success-message').textContent = message;
        }

        function showUploadError(message) {
            document.getElementById('processing-animation').classList.add('hidden');
            document.getElementById('error-animation').classList.remove('hidden');
            document.getElementById('error-message').textContent = message;
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // UPLOAD FUNCTIONS WITH LOADING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function uploadFiles() {
            if (selectedFiles.length === 0) {
                showNotification('Please select files to upload', 'warning');
                return;
            }

            const btn = document.getElementById('upload-files-btn');
            btn.disabled = true;

            // Show overlay
            showUploadOverlay();
            totalFilesToUpload = selectedFiles.length;
            currentUploadIndex = 0;

            let successCount = 0;
            let failCount = 0;
            const results = [];

            for (let i = 0; i < selectedFiles.length; i++) {
                const file = selectedFiles[i];
                currentUploadIndex = i + 1;
                
                // Update progress
                const baseProgress = (i / selectedFiles.length) * 100;
                updateProgress(baseProgress, currentUploadIndex, totalFilesToUpload);
                document.getElementById('processing-title').textContent = `Processing: ${file.name}`;
                
                try {
                    // Step 1: Extracting
                    updateProcessingStep('step-extract', 'active');
                    await sleep(300);
                    updateProgress(baseProgress + 5, currentUploadIndex, totalFilesToUpload);
                    
                    // Step 2: Chunking
                    updateProcessingStep('step-extract', 'completed');
                    updateProcessingStep('step-chunk', 'active');
                    await sleep(200);
                    updateProgress(baseProgress + 10, currentUploadIndex, totalFilesToUpload);
                    
                    // Actual upload
                    const formData = new FormData();
                    formData.append('file', file);

                    const response = await fetch('/upload', {
                        method: 'POST',
                        body: formData
                    });

                    const data = await response.json();
                    
                    // Step 3: Embedding
                    updateProcessingStep('step-chunk', 'completed');
                    updateProcessingStep('step-embed', 'active');
                    await sleep(200);
                    updateProgress(baseProgress + 15, currentUploadIndex, totalFilesToUpload);
                    
                    // Step 4: Indexing
                    updateProcessingStep('step-embed', 'completed');
                    updateProcessingStep('step-index', 'active');
                    await sleep(200);
                    updateProcessingStep('step-index', 'completed');
                    
                    const fileProgress = ((i + 1) / selectedFiles.length) * 100;
                    updateProgress(fileProgress, currentUploadIndex, totalFilesToUpload);
                    
                    if (data.success) {
                        successCount++;
                        results.push({ name: file.name, success: true, ...data });
                    } else {
                        failCount++;
                        results.push({ name: file.name, success: false, message: data.message });
                    }
                    
                    // Reset steps for next file
                    if (i < selectedFiles.length - 1) {
                        await sleep(300);
                        resetProcessingSteps();
                    }
                    
                } catch (error) {
                    failCount++;
                    results.push({ name: file.name, success: false, message: error.message });
                }
            }

            // Show final result
            await sleep(500);
            
            if (successCount > 0) {
                showUploadSuccess(`${successCount} file(s) processed successfully â€¢ ${results.reduce((acc, r) => acc + (r.chunks_created || 0), 0)} chunks created`);
            } else {
                showUploadError('All uploads failed. Please check your files and try again.');
            }

            // Reset
            selectedFiles = [];
            renderFileList();
            document.getElementById('file-input').value = '';
            btn.disabled = false;

            // Refresh documents
            loadDocuments();
            updateStats();
        }

        async function uploadText() {
            const content = document.getElementById('doc-input').value.trim();
            const filename = document.getElementById('doc-name').value.trim() || 'document.txt';

            if (!content) {
                showNotification('Please enter document content', 'warning');
                return;
            }

            const btn = document.getElementById('upload-text-btn');
            const loader = document.getElementById('upload-text-loader');
            
            btn.disabled = true;
            loader.classList.remove('hidden');

            // Show overlay
            showUploadOverlay();
            document.getElementById('processing-title').textContent = `Processing: ${filename}`;
            updateProgress(0, 1, 1);

            try {
                // Simulate processing steps
                updateProcessingStep('step-extract', 'active');
                await sleep(300);
                updateProgress(20, 1, 1);
                
                updateProcessingStep('step-extract', 'completed');
                updateProcessingStep('step-chunk', 'active');
                await sleep(200);
                updateProgress(40, 1, 1);

                const response = await fetch('/upload', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content, filename })
                });

                const data = await response.json();

                updateProcessingStep('step-chunk', 'completed');
                updateProcessingStep('step-embed', 'active');
                await sleep(200);
                updateProgress(70, 1, 1);
                
                updateProcessingStep('step-embed', 'completed');
                updateProcessingStep('step-index', 'active');
                await sleep(200);
                updateProgress(100, 1, 1);
                updateProcessingStep('step-index', 'completed');

                await sleep(300);

                if (data.success) {
                    showUploadSuccess(`Document processed: ${data.doc_type} â€¢ ${data.chunks_created} chunks created`);
                    document.getElementById('doc-input').value = '';
                    document.getElementById('doc-name').value = '';
                } else {
                    showUploadError(data.message);
                }

                loadDocuments();
                updateStats();

            } catch (error) {
                showUploadError(error.message);
            } finally {
                btn.disabled = false;
                loader.classList.add('hidden');
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // DOCUMENTS MANAGEMENT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function loadDocuments() {
            try {
                const response = await fetch('/documents');
                const data = await response.json();
                uploadedDocuments = data.documents || [];
                renderDocumentsList();
            } catch (error) {
                console.error('Failed to load documents:', error);
            }
        }

        function renderDocumentsList() {
            const section = document.getElementById('documents-section');
            const listEl = document.getElementById('documents-list');
            const badge = document.getElementById('doc-count-badge');

            if (uploadedDocuments.length === 0) {
                section.classList.add('hidden');
                return;
            }

            section.classList.remove('hidden');
            badge.textContent = uploadedDocuments.length;

            listEl.innerHTML = uploadedDocuments.map(doc => `
                <div class="doc-card flex justify-between items-center fade-in">
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">${getFileIcon(doc.filename)}</span>
                        <div>
                            <div class="font-medium text-gray-800 text-sm">${doc.filename}</div>
                            <div class="flex items-center gap-2 mt-1">
                                <span class="doc-type-tag">${doc.doc_type}</span>
                                <span class="text-gray-400 text-xs">${doc.chunks} chunks</span>
                            </div>
                        </div>
                    </div>
                    <button onclick="deleteDocument('${doc.doc_id}')" class="text-red-500 hover:text-red-700 p-2">
                        ğŸ—‘ï¸
                    </button>
                </div>
            `).join('');
        }

        async function deleteDocument(docId) {
            if (!confirm('Delete this document?')) return;
            try {
                const response = await fetch(`/documents/${docId}`, { method: 'DELETE' });
                const data = await response.json();
                if (data.success) {
                    showNotification('Document deleted', 'success');
                    loadDocuments();
                    updateStats();
                }
            } catch (error) {
                showNotification('Failed to delete', 'error');
            }
        }

        async function clearAllDocuments() {
            if (!confirm('Delete ALL documents?')) return;
            try {
                await fetch('/clear', { method: 'POST' });
                showNotification('All documents cleared', 'success');
                loadDocuments();
                updateStats();
                document.getElementById('answer-section').classList.add('hidden');
            } catch (error) {
                showNotification('Failed to clear', 'error');
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // QUESTION & ANSWER
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function setQuestion(question) {
            document.getElementById('question-input').value = question;
            document.getElementById('question-input').focus();
        }

        async function askQuestion() {
            const question = document.getElementById('question-input').value.trim();
            if (!question) {
                showNotification('Please enter a question', 'warning');
                return;
            }

            const btn = document.getElementById('ask-btn');
            const loader = document.getElementById('ask-loader');
            const section = document.getElementById('answer-section');
            const answerLoading = document.getElementById('answer-loading');
            const answerContent = document.getElementById('answer-content');

            btn.disabled = true;
            loader.classList.remove('hidden');
            
            // Show section with loading state
            section.classList.remove('hidden');
            answerLoading.classList.remove('hidden');
            answerContent.classList.add('hidden');

            try {
                const response = await fetch('/ask', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ question, simplify: true })
                });

                const data = await response.json();

                // Hide loading, show content
                answerLoading.classList.add('hidden');
                answerContent.classList.remove('hidden');

                // Display answer
                document.getElementById('answer-text').textContent = data.answer;

                // Confidence
                const confEl = document.getElementById('confidence-display');
                const confidence = (data.confidence * 100).toFixed(1);
                confEl.textContent = `Confidence: ${confidence}%`;
                confEl.className = 'px-3 py-1 rounded-full font-medium ';
                confEl.className += data.confidence > 0.7 ? 'bg-green-100 text-green-700' :
                                    data.confidence > 0.4 ? 'bg-yellow-100 text-yellow-700' :
                                    'bg-red-100 text-red-700';

                document.getElementById('time-display').textContent = `${data.processing_time_ms}ms`;

                // Simplified
                const simpSection = document.getElementById('simplified-section');
                if (data.simplified && data.simplified !== data.answer) {
                    simpSection.classList.remove('hidden');
                    document.getElementById('simplified-text').textContent = data.simplified;
                } else {
                    simpSection.classList.add('hidden');
                }

                // Concepts
                const conceptsSection = document.getElementById('concepts-section');
                if (data.concepts?.length > 0) {
                    conceptsSection.classList.remove('hidden');
                    document.getElementById('concepts-list').innerHTML = data.concepts.map(c => 
                        `<span class="concept-tag tooltip" data-tip="${c.definition || ''}">${c.term}</span>`
                    ).join('');
                } else {
                    conceptsSection.classList.add('hidden');
                }

                // Citations
                const citationsSection = document.getElementById('citations-section');
                if (data.citations?.length > 0) {
                    citationsSection.classList.remove('hidden');
                    document.getElementById('citations-list').innerHTML = data.citations.map(c => 
                        `<span class="citation-tag">${c.citation}</span>`
                    ).join('');
                } else {
                    citationsSection.classList.add('hidden');
                }

                // Sources
                const sourcesSection = document.getElementById('sources-section');
                if (data.sources?.length > 0) {
                    sourcesSection.classList.remove('hidden');
                    document.getElementById('sources-list').innerHTML = data.sources.map(s => `
                        <div class="source-card p-4 rounded-lg">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <span class="font-medium text-gray-800">${s.section || 'Section'}</span>
                                    <span class="doc-type-tag ml-2">${s.doc_type}</span>
                                </div>
                                <span class="text-sm text-gray-500">Score: ${s.score}</span>
                            </div>
                            <div class="text-gray-500 text-xs mb-2">${s.filename}</div>
                            <p class="text-gray-600 text-sm">${s.preview}</p>
                        </div>
                    `).join('');
                } else {
                    sourcesSection.classList.add('hidden');
                }

            } catch (error) {
                answerLoading.classList.add('hidden');
                answerContent.classList.remove('hidden');
                document.getElementById('answer-text').textContent = `Error: ${error.message}`;
            } finally {
                btn.disabled = false;
                loader.classList.add('hidden');
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SAMPLE DOCUMENTS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function loadSample(sampleId) {
            const sample = samples[sampleId];
            if (!sample) return;
            switchTab('text');
            document.getElementById('doc-input').value = sample.text;
            document.getElementById('doc-name').value = sample.name;
            showNotification(`Loaded "${sample.name}" - Click Upload to process`, 'info');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // UTILITY FUNCTIONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        async function updateStats() {
            try {
                const response = await fetch('/stats');
                const data = await response.json();
                const docCount = data.documents?.length || 0;
                const chunkCount = data.total_chunks || 0;
                document.getElementById('stats-display').textContent = `${docCount} document${docCount !== 1 ? 's' : ''} â€¢ ${chunkCount} chunks`;
            } catch (error) {
                console.error('Failed to update stats:', error);
            }
        }

        function showNotification(message, type = 'info') {
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                info: 'bg-blue-500'
            };
            const icons = { success: 'âœ…', error: 'âŒ', warning: 'âš ï¸', info: 'â„¹ï¸' };

            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 fade-in flex items-center gap-2`;
            notification.innerHTML = `<span>${icons[type]}</span><span>${message}</span>`;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100px)';
                notification.style.transition = 'all 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
